<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' data: artboard:; style-src 'self'; script-src 'self';"
    />
    <title>Artboard</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="stars"></div>
    <div class="stars2"></div>
    <div id="app">
      <main class="content">
        <canvas id="artboard"></canvas>
      </main>

      <footer class="app-footer">
        <div class="footer-left">
          <div class="footer-item footer-item--brand">
            <button id="open-reference" class="app-name-button" type="button">
              <span id="app-name" class="app-name">ArtBoard</span>
            </button>
          </div>

          <div class="footer-item footer-dropdown" data-footer-dropdown>
            <button
              id="workspace-menu-toggle"
              class="footer-trigger"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <span class="indicator"></span>
              <span id="active-workspace-label" class="footer-label">Workspace</span>
            </button>
            <div id="workspace-menu" class="footer-menu" role="menu">
              <ul id="workspace-list" class="menu-list"></ul>
              <div class="menu-sep"></div>
              <button id="workspace-create-panel" class="menu-item" type="button">
                New Workspace
              </button>
              <button id="open-settings-from-panel" class="menu-item" type="button">
                Manage Workspaces
              </button>
            </div>
          </div>

          <div class="footer-item footer-dropdown" data-footer-dropdown>
            <button
              id="page-menu-toggle"
              class="footer-trigger"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <span class="indicator"></span>
              <span id="page-indicator" class="footer-label">Page 1</span>
            </button>
            <div id="page-menu" class="footer-menu" role="menu">
              <ul id="page-list" class="menu-list"></ul>
              <div class="menu-sep"></div>
              <button id="page-nav-back" class="menu-item" type="button">Previous Page</button>
              <button id="page-nav-forward" class="menu-item" type="button">Next Page</button>
              <div class="menu-sep"></div>
              <button id="page-create" class="menu-item" type="button">New Page</button>
            </div>
          </div>

          <div class="footer-item footer-dropdown" data-footer-dropdown>
            <button
              id="zoom-menu-toggle"
              class="footer-trigger"
              type="button"
              aria-haspopup="true"
              aria-expanded="false"
            >
              <span class="indicator"></span>
              <span id="zoom-indicator" class="footer-label">100%</span>
            </button>
            <div id="zoom-menu" class="footer-menu" role="menu">
              <button class="menu-item" type="button" data-zoom="0.25">Zoom 25%</button>
              <button class="menu-item" type="button" data-zoom="0.5">Zoom 50%</button>
              <button class="menu-item" type="button" data-zoom="0.75">Zoom 75%</button>
              <button class="menu-item" type="button" data-zoom="1">Zoom 100%</button>
              <button class="menu-item" type="button" data-zoom="2">Zoom 200%</button>
              <div class="menu-sep"></div>
              <button class="menu-item" type="button" data-zoom="fit">Fit to Screen</button>
              <button class="menu-item" type="button" data-zoom="reset">Reset Zoom</button>
            </div>
          </div>
        </div>

        <div class="footer-right">
          <span
            id="capture-feedback"
            class="footer-status is-hidden"
            aria-live="polite"
          ></span>
          <div class="footer-actions">
            <button id="capture-screenshot" class="action-btn action-btn--primary" type="button">
              Capture
            </button>
            <button id="open-settings" class="action-btn action-btn--secondary" type="button">
              Settings
            </button>
          </div>
        </div>
      </footer>
    </div>

    <div
      id="drop-progress"
      class="drop-progress is-hidden"
      role="status"
      aria-live="polite"
      aria-hidden="true"
    >
      <div class="drop-progress__card">
        <span class="drop-progress__icon">‚¨ÜÔ∏è</span>
        <p id="drop-progress-title" class="drop-progress__title">Importing asset‚Ä¶</p>
        <p id="drop-progress-subtitle" class="drop-progress__subtitle">
          Hang tight while we place it on the canvas.
        </p>
      </div>
    </div>

    <div id="canvas-context-menu" class="context-menu" role="menu" tabindex="-1" hidden>
      <button
        type="button"
        data-action="paste"
        data-visibility="empty"
        role="menuitem"
        class="context-menu-item context-menu-item--primary"
      >
        <span class="menu-icon">üìã</span>
        <span class="menu-label">Paste</span>
      </button>
      <button
        type="button"
        data-action="navigate"
        data-visibility="empty"
        aria-haspopup="true"
        role="menuitem"
        class="context-menu-item"
      >
        <span class="menu-icon">üß≠</span>
        <span class="menu-label">Go to Page</span>
        <span class="menu-arrow">‚ñ∂</span>
      </button>
      <button
        type="button"
        data-action="move"
        data-visibility="selection"
        aria-haspopup="true"
        role="menuitem"
        class="context-menu-item"
      >
        <span class="menu-icon">üì¶</span>
        <span class="menu-label">Move to Page</span>
        <span class="menu-arrow">‚ñ∂</span>
      </button>
      <div
        class="context-menu-divider context-menu-divider--section"
        data-visibility="selection"
      ></div>
      <button
        type="button"
        data-action="front"
        data-visibility="selection"
        role="menuitem"
        class="context-menu-item"
      >
        <span class="menu-icon">‚¨ÜÔ∏è</span>
        <span class="menu-label">Bring to Front</span>
      </button>
      <button
        type="button"
        data-action="back"
        data-visibility="selection"
        role="menuitem"
        class="context-menu-item"
      >
        <span class="menu-icon">‚¨áÔ∏è</span>
        <span class="menu-label">Send to Back</span>
      </button>
      <div
        class="context-menu-divider context-menu-divider--section"
        data-visibility="selection"
      ></div>
      <button
        type="button"
        data-action="delete"
        data-visibility="selection"
        role="menuitem"
        class="context-menu-item context-menu-item--danger"
      >
        <span class="menu-icon">üóëÔ∏è</span>
        <span class="menu-label">Delete</span>
      </button>
    </div>

    <div
      id="canvas-context-submenu"
      class="context-submenu"
      role="menu"
      tabindex="-1"
      hidden
    >
      <div class="submenu-header">
        <span id="context-menu-submenu-title" class="submenu-title">Move to Page</span>
      </div>
      <ul id="context-menu-page-list" class="submenu-list" role="none"></ul>
      <p id="context-menu-submenu-empty" class="submenu-empty" hidden>
        No other pages available
      </p>
    </div>

    <dialog id="workspace-create-modal" class="app-modal">
      <form id="workspace-create-form" class="app-modal__form" method="dialog">
        <h3>Create Workspace</h3>
        <label class="app-modal__field">
          <span>Name</span>
          <input
            id="workspace-create-input"
            name="workspace"
            type="text"
            autocomplete="off"
            required
            maxlength="120"
          />
        </label>
        <p id="workspace-create-error" class="app-modal__error" role="alert"></p>
        <div class="app-modal__actions">
          <button type="button" class="secondary" id="workspace-create-cancel">Cancel</button>
          <button type="submit" id="workspace-create-submit">Create</button>
        </div>
      </form>
    </dialog>

    <dialog id="page-create-modal" class="app-modal">
      <form id="page-create-form" class="app-modal__form" method="dialog">
        <h3>Create Page</h3>
        <label class="app-modal__field">
          <span>Name</span>
          <input
            id="page-create-input"
            name="page"
            type="text"
            autocomplete="off"
            required
            maxlength="120"
            placeholder="Page 1"
          />
        </label>
        <p id="page-create-error" class="app-modal__error" role="alert"></p>
        <div class="app-modal__actions">
          <button type="button" class="secondary" id="page-create-cancel">Cancel</button>
          <button type="submit" id="page-create-submit">Create</button>
        </div>
      </form>
    </dialog>

    <dialog id="display-select-modal" class="app-modal">
      <form id="display-select-form" class="app-modal__form" method="dialog">
        <h3>Select Display</h3>
        <p class="display-select__description">Choose the screen to capture, then draw the region you want to add to your workspace.</p>
        <ul id="display-select-list" class="display-select__list"></ul>
        <div class="app-modal__actions">
          <button type="button" class="secondary" id="display-select-cancel">Cancel</button>
        </div>
      </form>
    </dialog>

    <dialog id="rename-modal" class="app-modal">
      <form id="rename-form" class="app-modal__form" method="dialog">
        <h3 id="rename-title">Rename</h3>
        <label class="app-modal__field">
          <span>Name</span>
          <input
            id="rename-input"
            name="name"
            type="text"
            autocomplete="off"
            required
            maxlength="120"
          />
        </label>
        <p id="rename-error" class="app-modal__error" role="alert"></p>
        <div class="app-modal__actions">
          <button type="button" class="secondary" id="rename-cancel">Cancel</button>
          <button type="submit" id="rename-submit">Rename</button>
        </div>
      </form>
    </dialog>

    <dialog id="confirm-modal" class="app-modal">
      <form id="confirm-form" class="app-modal__form" method="dialog">
        <h3 id="confirm-title">Confirm</h3>
        <p id="confirm-message" class="confirm-message"></p>
        <div class="app-modal__actions">
          <button type="button" class="secondary" id="confirm-cancel">Cancel</button>
          <button type="submit" id="confirm-submit" class="danger">Delete</button>
        </div>
      </form>
    </dialog>

    <dialog id="settings-modal" class="modal modal--large">
      <article class="settings">
        <header class="settings-header">
          <h2>Settings</h2>
          <button id="settings-close-x" class="panel-close-btn" type="button" aria-label="Close">‚úï</button>
        </header>

        <nav class="settings-tabs" role="tablist">
          <button class="tab-btn tab-btn--active" type="button" data-tab="workspaces" aria-selected="true">
            <span class="tab-icon">‚ú®</span>
            <span>Workspaces</span>
          </button>
          <button class="tab-btn" type="button" data-tab="pages" aria-selected="false">
            <span class="tab-icon">üìÑ</span>
            <span>Pages</span>
          </button>
          <button class="tab-btn" type="button" data-tab="preferences" aria-selected="false">
            <span class="tab-icon">‚öôÔ∏è</span>
            <span>Settings</span>
          </button>
          <button class="tab-btn" type="button" data-tab="about" aria-selected="false">
            <span class="tab-icon">‚ÑπÔ∏è</span>
            <span>About</span>
          </button>
        </nav>

        <div class="settings-panels">
          <!-- Workspaces Panel -->
          <div class="settings-panel settings-panel--active" data-panel="workspaces">
            <div class="panel-header-section">
              <div>
                <h3>Manage Workspaces</h3>
                <p class="panel-description">Create, rename, and organize your workspaces</p>
              </div>
              <button id="settings-workspace-create" class="icon-btn icon-btn--large" type="button">
                <span>+</span>
                <span>New Workspace</span>
              </button>
            </div>
            <div id="settings-workspace-list" class="settings-list"></div>
          </div>

          <!-- Pages Panel -->
          <div class="settings-panel" data-panel="pages">
            <div class="panel-header-section">
              <div>
                <h3>Manage Pages</h3>
                <p class="panel-description">Organize pages in your current workspace</p>
              </div>
              <button id="settings-page-create" class="icon-btn icon-btn--large" type="button">
                <span>+</span>
                <span>New Page</span>
              </button>
            </div>
            <div id="settings-page-list" class="settings-list"></div>
          </div>

          <!-- Preferences Panel -->
          <div class="settings-panel" data-panel="preferences">
            <div class="panel-header-section">
              <div>
                <h3>Preferences</h3>
                <p class="panel-description">Customize your Artboard experience</p>
              </div>
            </div>
            <p class="panel-placeholder">Settings coming soon...</p>
          </div>

          <!-- About Panel -->
          <div class="settings-panel" data-panel="about">
            <div class="about-content">
              <div class="about-logo">‚ú®</div>
              <h3 class="about-title">Artboard</h3>
              <p class="about-version" id="about-version">Version 1.0.0</p>
              <p class="about-description">
                Your infinite visual workspace for organizing screenshots, references, and inspiration.
                Built with Electron, Bun, and Fabric.js for creative minds.
              </p>
              <div class="about-links">
                <a href="https://github.com/hazlema/ArtBoard" class="about-link" target="_blank" rel="noreferrer">
                  <span class="link-icon">‚≠ê</span>
                  <span>GitHub</span>
                </a>
                <a href="https://github.com/hazlema/ArtBoard/issues" class="about-link" target="_blank" rel="noreferrer">
                  <span class="link-icon">üêõ</span>
                  <span>Report Issue</span>
                </a>
              </div>
              <div class="about-credits">
                <p>Built with ‚ù§Ô∏è for creative minds</p>
                <p class="credits-tech">Electron ‚Ä¢ Bun ‚Ä¢ Fabric.js ‚Ä¢ TypeScript</p>
              </div>
            </div>
          </div>
        </div>

        <footer class="settings-footer">
          <button id="settings-close" class="btn btn-primary" type="button">Done</button>
        </footer>
      </article>
    </dialog>

    <dialog id="reference-modal" class="modal modal--reference">
      <div class="reference-container">
        <header class="reference-header">
          <h2>Keyboard & Mouse Reference</h2>
          <button id="reference-close" class="reference-close-btn" type="button" aria-label="Close">‚úï</button>
        </header>
        <iframe id="reference-iframe" src="./reference.html" title="Keyboard and Mouse Reference Guide"></iframe>
      </div>
    </dialog>

    <script type="module" src="./app.browser.js"></script>
  </body>
</html>
